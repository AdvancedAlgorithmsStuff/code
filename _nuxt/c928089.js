(window.webpackJsonp=window.webpackJsonp||[]).push([[10,5],{268:function(t,e,n){"use strict";var r=n(12),o=n(1),c=n(3),l=n(104),h=n(19),d=n(15),f=n(192),v=n(40),y=n(106),x=n(194),_=n(4),m=n(76).f,w=n(34).f,T=n(17).f,P=n(273),k=n(269).trim,R="Number",O=o.Number,E=O.prototype,I=o.TypeError,N=c("".slice),A=c("".charCodeAt),S=function(t){var e=x(t,"number");return"bigint"==typeof e?e:C(e)},C=function(t){var e,n,r,o,c,l,h,code,d=x(t,"number");if(y(d))throw I("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(d=k(d),43===(e=A(d,0))||45===e){if(88===(n=A(d,2))||120===n)return NaN}else if(48===e){switch(A(d,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+d}for(l=(c=N(d,2)).length,h=0;h<l;h++)if((code=A(c,h))<48||code>o)return NaN;return parseInt(c,r)}return+d};if(l(R,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var B,j=function(t){var e=arguments.length<1?0:O(S(t)),n=this;return v(E,n)&&_((function(){P(n)}))?f(Object(e),n,j):e},G=r?m(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;G.length>M;M++)d(O,B=G[M])&&!d(j,B)&&T(j,B,w(O,B));j.prototype=E,E.constructor=j,h(o,R,j)}},269:function(t,e,n){var r=n(3),o=n(23),c=n(13),l=n(270),h=r("".replace),d="["+l+"]",f=RegExp("^"+d+d+"*"),v=RegExp(d+d+"*$"),y=function(t){return function(e){var n=c(o(e));return 1&t&&(n=h(n,f,"")),2&t&&(n=h(n,v,"")),n}};t.exports={start:y(1),end:y(2),trim:y(3)}},270:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},271:function(t,e,n){var content=n(277);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(61).default)("4fffb91f",content,!0,{sourceMap:!1})},273:function(t,e,n){var r=n(3);t.exports=r(1..valueOf)},276:function(t,e,n){"use strict";n(271)},277:function(t,e,n){var r=n(60)(!1);r.push([t.i,".playbackControlsComponent[data-v-df4c20f8]{display:inline-flex;flex-direction:column;width:500px}.playbackControlsComponent .statusRow[data-v-df4c20f8]{display:inline-flex;flex-direction:row;align-items:center;justify-content:space-between}.playbackControlsComponent .statusRow p[data-v-df4c20f8]{display:inline-block}.playbackControlsComponent .progressRow[data-v-df4c20f8]{width:100%}.playbackControlsComponent .progressRow input[type=range][data-v-df4c20f8]{display:block;width:100%}.playbackControlsComponent .controlsRow[data-v-df4c20f8]{display:inline-flex;flex-direction:row;align-items:center;justify-content:space-around}",""]),t.exports=r},280:function(t,e,n){"use strict";n.r(e);n(268),n(11),n(78),n(62);var r=n(2).a.extend({name:"PlaybackControls",data:function(){return{symbols:{START:"⏮",BACK:"⏪",PLAY:"▶",PAUSE:"⏸",FORWARD:"⏩",END:"⏭"},speed:1,value:0,isPlaying:!1,timerInterval:void 0,shifting:!1}},watch:{value:function(){this.$emit("playbackProgress",this.value)},max:function(){this.value=this.max,this.isPlaying=!1,this.$emit("playbackProgress",this.value)}},props:{max:{type:Number,required:!0}},methods:{nextStep:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=function(t,e){return(t%e+e)%e};this.value=e(parseInt(this.value.toString())+t,this.max+1),console.log(this.value)},nextSpeed:function(){var t=this;if(this.shifting)return this.prevSpeed();!function(){switch(t.speed){case 1:return t.speed=2;case 2:return t.speed=4;case 4:return t.speed=8;case 8:return t.speed=16;case 16:return t.speed=32;case 32:return t.speed=.25;case.25:return t.speed=.5;case.5:t.speed=1}}(),this.isPlaying&&(this.stopPlayback(),this.startPlayback())},prevSpeed:function(){var t=this;!function(){switch(t.speed){case 1:return t.speed=.5;case 2:return t.speed=1;case 4:return t.speed=2;case 8:return t.speed=4;case 16:return t.speed=8;case 32:return t.speed=16;case.25:return t.speed=32;case.5:t.speed=.25}}(),this.isPlaying&&(this.stopPlayback(),this.startPlayback())},togglePlayPause:function(){this.isPlaying?this.stopPlayback():this.startPlayback()},startPlayback:function(){var t=this;this.timerInterval||(this.timerInterval=setInterval((function(){t.isPlaying&&t.nextStep()}),1/this.speed*1e3)),this.isPlaying=!0},stopPlayback:function(){this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=void 0,this.isPlaying=!1},step:function(t){this.isPlaying&&this.stopPlayback(),this.nextStep(t)},skipStart:function(){this.isPlaying&&this.stopPlayback(),this.value=0},skipEnd:function(){this.isPlaying&&this.stopPlayback(),this.value=this.max},updateValue:function(t){this.value=parseInt(t.target.value)},onKeyDown:function(t){t.shiftKey?this.shifting=!0:this.shifting=!1},onKeyUp:function(t){t.shiftKey?this.shifting=!0:this.shifting=!1}},mounted:function(){this.value=this.max,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},destroyed:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),this.stopPlayback()}}),o=r,c=(n(276),n(50)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playbackControlsComponent"},[n("div",{staticClass:"statusRow"},[n("p",[t._v("0")]),t._v(" "),n("p",[t._v("Step: "+t._s(t.value))]),t._v(" "),n("p",[t._v(t._s(t.max))])]),t._v(" "),n("div",{staticClass:"progressRow js"},[n("input",{ref:"progress",staticClass:"active",style:{"--min":0,"--max":t.max,"--val":t.value},attrs:{type:"range",step:"1",min:"0",max:t.max},domProps:{value:t.value},on:{input:t.updateValue}})]),t._v(" "),n("div",{staticClass:"controlsRow"},[n("button",{on:{click:function(e){return e.preventDefault(),t.skipStart.apply(null,arguments)}}},[t._v(t._s(t.symbols.START))]),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.step(-1)}}},[t._v(t._s(t.symbols.BACK))]),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.togglePlayPause.apply(null,arguments)}}},[t._v(t._s(t.isPlaying?t.symbols.PAUSE:t.symbols.PLAY))]),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.step(1)}}},[t._v(t._s(t.symbols.FORWARD))]),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.skipEnd.apply(null,arguments)}}},[t._v(t._s(t.symbols.END))]),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.nextSpeed.apply(null,arguments)}}},[t._v("(x"+t._s(t.speed)+" speed)")])])])}),[],!1,null,"df4c20f8",null);e.default=component.exports},330:function(t,e,n){var r=n(6),o=n(25),c=n(66),l=n(331),h=n(198),d=n(9),f=n(16),v=n(53),y=n(4),x=o("Reflect","construct"),_=Object.prototype,m=[].push,w=y((function(){function t(){}return!(x((function(){}),[],t)instanceof t)})),T=!y((function(){x((function(){}))})),P=w||T;r({target:"Reflect",stat:!0,forced:P,sham:P},{construct:function(t,e){h(t),d(e);var n=arguments.length<3?t:h(arguments[2]);if(T&&!w)return x(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return c(m,r,e),new(c(l,t,r))}var o=n.prototype,y=v(f(o)?o:_),P=c(t,y,e);return f(P)?P:y}})},331:function(t,e,n){"use strict";var r=n(1),o=n(3),c=n(59),l=n(16),h=n(15),d=n(84),f=n(81),v=r.Function,y=o([].concat),x=o([].join),_={},m=function(t,e,n){if(!h(_,e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";_[e]=v("C,a","return new C("+x(r,",")+")")}return _[e](t,n)};t.exports=f?v.bind:function(t){var e=c(this),n=e.prototype,r=d(arguments,1),o=function(){var n=y(r,d(arguments));return this instanceof o?m(e,n.length,n):e.apply(t,n)};return l(n)&&(o.prototype=n),o}},332:function(t,e,n){n(6)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},335:function(t,e,n){"use strict";n.r(e),n.d(e,"SequenceAlignmentRenderer",(function(){return w}));n(330);var r=n(143),o=n(144);function c(t,p){return c=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t},c(t,p)}var l=n(21);function h(t,e){if(e&&("object"===Object(l.a)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}n(11),n(78),n(26),n(193),n(135),n(37),n(332),n(268);var f,v,y=n(2);n(85);!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.CENTER=1]="CENTER"}(f||(f={})),function(t){t[t.RIGHT=0]="RIGHT",t[t.BOTTOM=1]="BOTTOM",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT"}(v||(v={}));var x=function(){function t(canvas){Object(r.a)(this,t),this.canvas=canvas,this._ctx=this.canvas.getContext("2d"),this._ctx.font="20px monospace"}return Object(o.a)(t,[{key:"ctx",get:function(){return this._ctx}},{key:"width",get:function(){return this._ctx.canvas.width},set:function(t){this._ctx.canvas.width=t}},{key:"height",get:function(){return this._ctx.canvas.height},set:function(t){this._ctx.canvas.height=t}},{key:"getSizedFont",value:function(t){return this._ctx.font.replace(/\d+px/,"".concat(t,"px"))}},{key:"drawText",value:function(text,t,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.TOP_LEFT;switch(this._ctx.save(),this._ctx.font="20px monospace",n){case f.CENTER:this._ctx.textAlign="center",this._ctx.textBaseline="middle";break;case f.TOP_LEFT:this._ctx.textAlign="start",this._ctx.textBaseline="top"}this._ctx.fillText(text,t,e),this._ctx.restore()}},{key:"drawNode",value:function(text,t,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;this.drawText(text,t+n,e+n,f.CENTER),this._ctx.beginPath(),this._ctx.arc(t+n,e+n,n,0,2*Math.PI),this._ctx.stroke()}},{key:"joinNodes",value:function(t,e,n,r,o){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,l=4;this._ctx.beginPath(),o==v.RIGHT?(this._ctx.moveTo(t+2*c,e+c),this._ctx.lineTo(n,r+c),this._ctx.moveTo(n,r+c),this._ctx.lineTo(n-l,r+c-l),this._ctx.moveTo(n,r+c),this._ctx.lineTo(n-l,r+c+l)):o==v.BOTTOM?(this._ctx.moveTo(t+c,e+2*c),this._ctx.lineTo(n+c,r),this._ctx.moveTo(n+c,r),this._ctx.lineTo(n+c-l,r-l),this._ctx.moveTo(n+c,r),this._ctx.lineTo(n+c+l,r-l)):o==v.BOTTOM_RIGHT&&(this._ctx.moveTo(t+1.75*c,e+1.75*c),this._ctx.lineTo(n+.25*c,r+.25*c),this._ctx.moveTo(n+.25*c,r+.25*c),this._ctx.lineTo(n+.25*c,r+.25*c-1.5*l),this._ctx.moveTo(n+.25*c,r+.25*c),this._ctx.lineTo(n+.25*c-1.5*l,r+.25*c)),this._ctx.stroke()}}]),t}(),_=n(280);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(n,t);var e=m(n);function n(canvas,t){var o;return Object(r.a)(this,n),o=e.call(this,canvas),t.wordA.length<t.wordB.length?(o.wordA=t.wordB,o.wordB=t.wordA):(o.wordA=t.wordA,o.wordB=t.wordB),o.mismatchPenalty=Math.max(parseInt(t.mismatchPenalty.toString()),0),o.gapPenalty=Math.max(parseInt(t.gapPenalty.toString()),0),o.word="",o}return Object(o.a)(n,[{key:"wordAParts",get:function(){return this.wordA.split("")}},{key:"wordBParts",get:function(){return this.wordB.split("")}},{key:"render",value:function(t){var e=this;this.max||-1==t||this.render(-1),this.ctx.fillRect(0,0,this.width,this.height);var n=0;function r(t,e){return{x:60+40*t+40*(t-1),y:60+40*e+40*(e-1)}}this.buildInitialGraph();for(var o=[],i=0;i<=this.wordA.length;i++){o.push([]);for(var c=0;c<=this.wordB.length;c++)o[i].push(0)}for(var l=0;l<=this.wordA.length;l++)if(o[l][0]=l*this.gapPenalty,l>0){this._ctx.save(),this._ctx.lineWidth=2,this._ctx.strokeStyle="black";var h=r(l-1,0),d=r(l,0);this.joinNodes(h.x,h.y,d.x,d.y,v.RIGHT),this._ctx.restore()}for(var f=0;f<=this.wordB.length;f++)if(o[0][f]=f*this.gapPenalty,f>0){this._ctx.save(),this._ctx.lineWidth=2,this._ctx.strokeStyle="black";var y=r(0,f-1),x=r(0,f);this.joinNodes(y.x,y.y,x.x,x.y,v.BOTTOM),this._ctx.restore()}if(0!=t){for(var _=0,m=0,w=1,T=1,P=0;P<this.wordAParts.length*this.wordBParts.length;P++){if(t>0&&P+1>t)return;n++;var k=r(_,m),R=r(w,T);this._ctx.save(),this._ctx.lineWidth=2,this._ctx.strokeStyle="#ADADAD",this.joinNodes(R.x,k.y,R.x,R.y,v.BOTTOM),this.joinNodes(k.x,R.y,R.x,R.y,v.RIGHT),this.joinNodes(k.x,k.y,R.x,R.y,v.BOTTOM_RIGHT),this._ctx.restore();var O=void 0;this.wordAParts[w-1]==this.wordBParts[T-1]?(O=o[_][m],o[w][T]=o[_][m],this._ctx.save(),this._ctx.lineWidth=2,this._ctx.strokeStyle="black",this.joinNodes(k.x,k.y,R.x,R.y,v.BOTTOM_RIGHT),this._ctx.restore()):o[_][m]+this.mismatchPenalty==o[w-1][T]+this.gapPenalty?(O=o[_][m]+this.mismatchPenalty,o[w][T]=o[_][m]+this.mismatchPenalty,this._ctx.save(),this._ctx.lineWidth=2,this._ctx.strokeStyle="black",this.joinNodes(k.x,R.y,R.x,R.y,v.RIGHT),this.joinNodes(k.x,k.y,R.x,R.y,v.BOTTOM_RIGHT),this._ctx.restore()):o[_][m]+this.mismatchPenalty<o[w-1][T]+this.gapPenalty?(O=o[_][m]+this.mismatchPenalty,o[w][T]=o[_][m]+this.mismatchPenalty,this._ctx.save(),this._ctx.lineWidth=2,this._ctx.strokeStyle="black",this.joinNodes(k.x,k.y,R.x,R.y,v.BOTTOM_RIGHT),this._ctx.restore()):(O=o[w-1][T]+this.gapPenalty,o[w][T]=o[w-1][T]+this.gapPenalty,this._ctx.save(),this._ctx.lineWidth=2,this._ctx.strokeStyle="black",this.joinNodes(k.x,R.y,R.x,R.y,v.RIGHT),this._ctx.restore()),this.drawNode(O.toString(),R.x,R.y),w%this.wordAParts.length==0?(_=0,m++,w=1,T++):(_++,w++)}w=this.wordAParts.length,T=this.wordBParts.length;for(var E="",I=function(t,n,o,c,l,h){var d=r(t,n),f=r(o,c);e._ctx.save(),e._ctx.lineWidth=2,e._ctx.strokeStyle=l,e.joinNodes(d.x,d.y,f.x,f.y,h),e._ctx.restore()};;){if(n++,t>0&&n+1>t)return;if(w<=0)break;0!=T?this.wordAParts[w-1]==this.wordBParts[T-1]||o[w-1][T-1]+this.mismatchPenalty==o[w][T]?(I(w-1,T-1,w,T,"red",v.BOTTOM_RIGHT),w--,T--,E+=this.wordBParts[T]):(I(w-1,T,w,T,"red",v.RIGHT),w--,E+="_"):(I(w-1,T,w,T,"red",v.RIGHT),w--,E+="_")}-1==t&&(this.word=E.split("").reverse().join("")),this.max||(this.ctx.fillRect(0,0,this.width,this.height),this.max=n)}}},{key:"buildInitialGraph",value:function(){var t=this,e=this.wordA.split(""),n=this.wordB.split("");this.width=60+40*e.length+40*e.length+1,this.height=60+40*n.length+40*n.length+1,this.drawNode("0",20,20),this.drawText("ε",2.5,30),this.drawText("ε",32.5,0),e.forEach((function(e,n){var r=40*n+40*(n+1);t.drawText(e,60+r+13.5,0),t.drawNode((t.gapPenalty*(n+1)).toString(),60+r,20)})),n.forEach((function(e,n){var r=40*n+40*(n+1);t.drawText(e,2.5,60+r+10),t.drawNode((t.gapPenalty*(n+1)).toString(),20,60+r)}))}}]),n}(x),T=y.a.extend({components:{PlaybackControls:_.default},data:function(){return{inputs:["campus","mus"],delta:2,alpha:1,word:"",renderer:void 0}},computed:{penalties:function(){return{alpha:this.alpha,delta:this.delta}}},watch:{inputs:function(){this.createRenderer()},penalties:function(){this.createRenderer()}},mounted:function(){this.createRenderer()},methods:{createRenderer:function(){if(this.inputs.length>2)this.$renderText("Too many inputs: max is 2",{parentElement:this.$refs.diagram,replaceContents:!0});else{var canvas=document.createElement("canvas");this.renderer=new w(canvas,{wordA:this.inputs[0],wordB:this.inputs[1],gapPenalty:this.delta,mismatchPenalty:this.alpha}),this.renderStep(Number.MAX_SAFE_INTEGER)}},renderStep:function(t){this.renderer.render(t),this.$renderEmpty(this.$refs.diagram),this.$refs.diagram.appendChild(this.renderer.ctx.canvas),this.word=this.renderer.word}}}),P=n(50),component=Object(P.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("br"),n("br"),t._v(" "),n("center",[n("div",{attrs:{id:"controls"}},[n("h2",[t._v("Sequence Alignment")]),t._v(" "),n("br"),t._v(" "),t._l(t.inputs,(function(input,e){return n("div",[n("p",[t._v("Input "+t._s(e+1)+": "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputs[e],expression:"inputs[key]"}],attrs:{type:"text"},domProps:{value:t.inputs[e]},on:{input:function(n){n.target.composing||t.$set(t.inputs,e,n.target.value)}}})]),t._v(" "),n("p",[t._v("(length: "+t._s(input.length)+")")])])})),t._v(" "),n("br"),t._v(" "),n("p",[t._v("α (mismatch penalty): "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.alpha,expression:"alpha"}],attrs:{type:"number",min:"0"},domProps:{value:t.alpha},on:{input:function(e){e.target.composing||(t.alpha=e.target.value)}}})]),t._v(" "),n("p",[t._v("δ (gap penalty): "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.delta,expression:"delta"}],attrs:{type:"number",min:"0"},domProps:{value:t.delta},on:{input:function(e){e.target.composing||(t.delta=e.target.value)}}})])],2),t._v(" "),n("br"),t._v(" "),t.renderer?n("div",[n("PlaybackControls",{attrs:{max:t.renderer.max},on:{playbackProgress:t.renderStep}})],1):t._e()]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("center",[t.renderer?n("div",[n("p",{staticClass:"monospace"},[t._v(t._s(t.renderer.wordA))]),t._v(" "),n("p",{staticClass:"monospace"},[t._v(t._s(t.renderer.word))])]):t._e(),t._v(" "),n("br"),t._v(" "),n("div",{ref:"diagram",attrs:{id:"diagram"}})])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PlaybackControls:n(280).default})}}]);
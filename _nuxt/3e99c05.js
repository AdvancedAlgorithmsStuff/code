(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{286:function(t,e,n){var r=n(6),o=n(287),c=n(107);r({target:"Array",proto:!0},{fill:o}),c("fill")},287:function(t,e,n){"use strict";var r=n(30),o=n(79),c=n(37);t.exports=function(t){for(var e=r(this),n=c(e),f=arguments.length,l=o(f>1?arguments[1]:void 0,n),d=f>2?arguments[2]:void 0,h=void 0===d?n:o(d,n);h>l;)e[l++]=t;return e}},309:function(t,e,n){var r=n(6),o=n(26),c=n(66),f=n(310),l=n(196),d=n(9),h=n(16),v=n(53),m=n(4),y=o("Reflect","construct"),_=Object.prototype,x=[].push,w=m((function(){function t(){}return!(y((function(){}),[],t)instanceof t)})),T=!m((function(){y((function(){}))})),O=w||T;r({target:"Reflect",stat:!0,forced:O,sham:O},{construct:function(t,e){l(t),d(e);var n=arguments.length<3?t:l(arguments[2]);if(T&&!w)return y(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return c(x,r,e),new(c(f,t,r))}var o=n.prototype,m=v(h(o)?o:_),O=c(t,m,e);return h(O)?O:m}})},310:function(t,e,n){"use strict";var r=n(1),o=n(3),c=n(61),f=n(16),l=n(15),d=n(82),h=n(80),v=r.Function,m=o([].concat),y=o([].join),_={},x=function(t,e,n){if(!l(_,e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";_[e]=v("C,a","return new C("+y(r,",")+")")}return _[e](t,n)};t.exports=h?v.bind:function(t){var e=c(this),n=e.prototype,r=d(arguments,1),o=function(){var n=m(r,d(arguments));return this instanceof o?x(e,n.length,n):e.apply(t,n)};return f(n)&&(o.prototype=n),o}},311:function(t,e,n){"use strict";function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,"a",(function(){return r}))},312:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l}));var r,o,c=n(136),f=n(137);n(25),n(83),n(286);!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.CENTER=1]="CENTER"}(r||(r={})),function(t){t[t.RIGHT=0]="RIGHT",t[t.BOTTOM=1]="BOTTOM",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT"}(o||(o={}));var l=function(){function t(canvas){Object(c.a)(this,t),this.canvas=canvas,this._ctx=this.canvas.getContext("2d"),this._ctx.font="20px monospace"}return Object(f.a)(t,[{key:"ctx",get:function(){return this._ctx}},{key:"width",get:function(){return this._ctx.canvas.width},set:function(t){this._ctx.canvas.width=t}},{key:"height",get:function(){return this._ctx.canvas.height},set:function(t){this._ctx.canvas.height=t}},{key:"getSizedFont",value:function(t){return this._ctx.font.replace(/\d+px/,"".concat(t,"px"))}},{key:"drawText",value:function(text,t,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.TOP_LEFT;switch(this._ctx.save(),this._ctx.font="20px monospace",n){case r.CENTER:this._ctx.textAlign="center",this._ctx.textBaseline="middle";break;case r.TOP_LEFT:this._ctx.textAlign="start",this._ctx.textBaseline="top"}this._ctx.fillText(text,t,e),this._ctx.restore()}},{key:"drawNode",value:function(text,t,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.radius,c=void 0===o?20:o,f=n.fillInside;if(f){var l=this._ctx.fillStyle;this._ctx.fillStyle="white",this._ctx.beginPath(),this._ctx.ellipse(t+c,e+c,c,c,0,0,2*Math.PI),this._ctx.fill(),this._ctx.fillStyle=l}this._ctx.beginPath(),this._ctx.arc(t+c,e+c,c,0,2*Math.PI),this._ctx.stroke(),this.drawText(text,t+c,e+c,r.CENTER)}},{key:"joinNodes",value:function(t,e,n,r,c){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,l=4;this._ctx.beginPath(),c==o.RIGHT?(this._ctx.moveTo(t+2*f,e+f),this._ctx.lineTo(n,r+f),this._ctx.moveTo(n,r+f),this._ctx.lineTo(n-l,r+f-l),this._ctx.moveTo(n,r+f),this._ctx.lineTo(n-l,r+f+l)):c==o.BOTTOM?(this._ctx.moveTo(t+f,e+2*f),this._ctx.lineTo(n+f,r),this._ctx.moveTo(n+f,r),this._ctx.lineTo(n+f-l,r-l),this._ctx.moveTo(n+f,r),this._ctx.lineTo(n+f+l,r-l)):c==o.BOTTOM_RIGHT&&(this._ctx.moveTo(t+1.75*f,e+1.75*f),this._ctx.lineTo(n+.25*f,r+.25*f),this._ctx.moveTo(n+.25*f,r+.25*f),this._ctx.lineTo(n+.25*f,r+.25*f-1.5*l),this._ctx.moveTo(n+.25*f,r+.25*f),this._ctx.lineTo(n+.25*f-1.5*l,r+.25*f)),this._ctx.stroke()}}]),t}()},313:function(t,e,n){"use strict";function r(t,p){return r=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t},r(t,p)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}n.d(e,"a",(function(){return o}))},314:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(21);function o(t,e){if(e&&("object"===Object(r.a)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}},320:function(t,e,n){var content=n(339);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(60).default)("e5411f16",content,!0,{sourceMap:!1})},338:function(t,e,n){"use strict";n(320)},339:function(t,e,n){var r=n(59)(!1);r.push([t.i,"table[data-v-dbb2f2ba]{border-collapse:collapse}td[data-v-dbb2f2ba],th[data-v-dbb2f2ba]{border:1px solid #000}",""]),t.exports=r},343:function(t,e,n){"use strict";n.r(e);n(41),n(27),n(32),n(45),n(46);var r=n(22),o=n(8),c=n(282),f=(n(195),n(63),n(64),n(11),n(34),n(40),n(25),n(192),n(42),n(51),n(283),n(268),n(289),n(28),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(29),n(44),n(306),n(36),n(307)),l=n(316),d=(n(309),n(136)),h=n(137),v=n(313),m=n(314),y=n(311);function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(y.a)(t);if(e){var o=Object(y.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(m.a)(this,n)}}var T=function(t){Object(v.a)(n,t);var e=w(n);function n(canvas,t,o,c){var f;Object(d.a)(this,n),(f=e.call(this,canvas)).nodes=t,f.nodesPos={},t.forEach((function(a){return f.nodesPos[a]=[0,0]})),f.selected="",f.updatePos=o,f.renderCanvas=c,o(f.nodesPos);return canvas.onmousedown=function(t){!function(t,e){var n,o,c,l,d,h,v,m=_(f.nodes);try{for(m.s();!(n=m.n()).done;){var i=n.value;if(o=f.nodesPos[i],c=t,l=e,d=void 0,h=void 0,v=void 0,h=(d=Object(r.a)(o,2))[0],v=d[1],Math.sqrt(Math.pow(h+20-c,2)+Math.pow(v+20-l,2))<=20)return void(f.selected=i)}}catch(t){m.e(t)}finally{m.f()}}(t.offsetX,t.offsetY)},canvas.onmousemove=function(t){f.selected&&(f.nodesPos[f.selected]=[t.offsetX-20,t.offsetY-20],f.render(),o(f.nodesPos))},canvas.onmouseenter=function(){f.selected="",f.render()},canvas.onmouseleave=canvas.onmouseenter,canvas.onmouseup=canvas.onmouseenter,f}return Object(h.a)(n,[{key:"pos",get:function(){return this.nodesPos}},{key:"render",value:function(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle="black";for(var i=this.nodes.length-1;i>=0;i--){var t=this.nodesPos[this.nodes[i]];this.drawNode(this.nodes[i],t[0],t[1],{fillInside:!0})}if(this.selected){var e=this.nodesPos[this.selected];this.drawNode(this.selected,e[0],e[1],{fillInside:!0})}this.renderCanvas()}},{key:"updateNodes",value:function(t){var e=this;console.log("t",t),this.nodes=t,Object.keys(this.nodesPos).forEach((function(a){return delete e.nodesPos[a]})),t.forEach((function(a){return e.nodesPos[a]=[0,0]})),this.render(),this.updatePos(this.nodesPos)}}]),n}(n(312).b);function O(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw o}}}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var j=n(2).a.extend({data:function(){return{itemListRaw:[{origin:"s",destination:"2",capacity:"10"},{origin:"s",destination:"3",capacity:"10"},{origin:"2",destination:"3",capacity:"2"},{origin:"2",destination:"5",capacity:"8"},{origin:"2",destination:"4",capacity:"4"},{origin:"3",destination:"5",capacity:"9"},{origin:"4",destination:"t",capacity:"10"},{origin:"5",destination:"4",capacity:"6"},{origin:"5",destination:"t",capacity:"10"}],errorMsg:!1,steps:[],chapters:[],smart:"",renderer:void 0,pos:{}}},mounted:function(){var t=this;this.$nextTick((function(){t.itemListRaw=Object(c.a)(t.itemListRaw),t.calculate(),t.renderDiagramStep(t.steps.length-1),t.createRender()}))},methods:{createRender:function(){var t=this,canvas=document.createElement("canvas");this.renderer=new T(canvas,this.nodeNames,(function(e){t.pos=e,t.calculate(),t.renderDiagramStep(0)}),this.renderCanvas),this.renderer.render()},renderCanvas:function(){this.$renderEmpty(this.$refs.canvas),this.$refs.canvas.appendChild(this.renderer.ctx.canvas)},renderDiagramStep:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.steps[t]){n.next=6;break}return console.log(e.steps[t]),console.log(e.pos),console.log(e.pos.A),n.next=6,e.$renderDiagram(e.steps[t],{parentElement:e.$refs.diagram,replaceContents:!0,engine:"neato"});case 6:case"end":return n.stop()}}),n)})))()},addItem:function(){this.itemListRaw.push({origin:"",destination:"",capacity:"0"})},removeItem:function(){this.itemListRaw.splice(-1)},calculate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,c,d,h,v,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.errorMsg=!1,(n=t.nodeNames).includes("t")&&n.includes("s")){e.next=5;break}return t.errorMsg="A s and t node are needed",e.abrupt("return");case 5:o=[],c=Object(f.c)(o,n),d={},Object.keys(t.pos).forEach((function(a){return d[a]=[t.pos[a][0]/40,-t.pos[a][1]/40]})),h=Object(l.a)(d,t.itemList,c,n,[{name:"Initial",steps:1}],o),v=Object(r.a)(h,2),m=v[0],y=v[1],t.chapters=y,t.steps=m;case 12:case"end":return e.stop()}}),e)})))()},smartInsert:function(){var t=this.smart.split(",");3==t.length&&(this.itemListRaw.push({origin:t[0],destination:t[1],capacity:t[2]}),this.smart="")}},computed:{itemList:function(){return this.itemListRaw.map((function(a){return{origin:a.origin.trim(),destination:a.destination.trim(),capacity:Number(a.capacity)}})).filter((function(a){return a.origin&&a.destination&&!isNaN(a.capacity)}))},nodeNames:function(){var t,e=new Set,n=O(this.itemList);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.add(r.origin),e.add(r.destination)}}catch(t){n.e(t)}finally{n.f()}var a=Array.from(e);return a.sort(),a}},watch:{itemList:function(){var t,e,n=new Set,r=O(this.itemList);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.add(o.origin),n.add(o.destination)}}catch(t){r.e(t)}finally{r.f()}var a=Array.from(n);a.sort(),null===(t=this.renderer)||void 0===t||t.updateNodes(a),this.calculate()},itemListRaw:function(){var t,e,n=new Set,r=O(this.itemList);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.add(o.origin),n.add(o.destination)}}catch(t){r.e(t)}finally{r.f()}var a=Array.from(n);a.sort(),null===(t=this.renderer)||void 0===t||t.updateNodes(a),this.calculate()},pos:function(){this.calculate()}}}),R=(n(338),n(50)),component=Object(R.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[t._m(0),t._v(" "),t._l(this.itemListRaw,(function(e,r){return n("tr",{key:r},[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.origin,expression:"item.origin"}],domProps:{value:e.origin},on:{input:function(n){n.target.composing||t.$set(e,"origin",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.destination,expression:"item.destination"}],domProps:{value:e.destination},on:{input:function(n){n.target.composing||t.$set(e,"destination",n.target.value)}}})]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.capacity,expression:"item.capacity"}],domProps:{value:e.capacity},on:{input:function(n){n.target.composing||t.$set(e,"capacity",n.target.value)}}})])])}))],2),t._v(" "),n("div",{ref:"canvas",attrs:{id:"canvas"}}),t._v(" "),n("button",{on:{click:t.addItem}},[t._v("Add Item")]),t._v(" "),n("button",{on:{click:t.removeItem}},[t._v("Remove Item")]),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.smart,expression:"smart"}],domProps:{value:t.smart},on:{input:function(e){e.target.composing||(t.smart=e.target.value)}}}),n("button",{on:{click:t.smartInsert}},[t._v("Insert")]),t._v(" "),n("transition",{attrs:{name:"fade"}},[this.errorMsg?n("div",[t._v("\n            "+t._s(this.errorMsg)+"\n        ")]):n("div",[n("ChapterPlaybackControls",{attrs:{chapters:this.chapters},on:{playbackProgress:this.renderDiagramStep}}),t._v(" "),n("div",{ref:"diagram"})],1)])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("\n                Origin\n            ")]),t._v(" "),n("th",[t._v("\n                Destination\n            ")]),t._v(" "),n("th",[t._v("\n                Capacity\n            ")])])}],!1,null,"dbb2f2ba",null);e.default=component.exports;installComponents(component,{ChapterPlaybackControls:n(288).default})}}]);